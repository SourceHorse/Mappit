"use strict";(self["webpackChunkmappitweb"]=self["webpackChunkmappitweb"]||[]).push([[1442],{51442:function(e,t,l){l.r(t),l.d(t,{previewSymbol2D:function(){return F}});var a=l(36945),n=l(22130),i=l(30524),o=l(79699),s=l(91742),u=l(6684);const c="picture-fill",m="picture-marker",r="simple-fill",h="simple-line",d="simple-marker",p="text",f="Aa",v=s.b_.size,y=s.b_.maxSize,w=s.b_.maxOutlineSize,b=s.b_.lineWidth,g=document.createElement("canvas");function M(e,t){const l=g.getContext("2d"),a=[];return t&&(t.weight&&a.push(t.weight),t.size&&a.push(t.size+"px"),t.family&&a.push(t.family)),l.font=a.join(" "),l.measureText(e).width}const k=7.2/2.54,x=72/2.54;function L(e){if(0===e.length)return 0;if(e.length>2){const t=(0,i.Wz)(1),l=parseFloat(e);switch(e.slice(-2)){case"px":return l;case"pt":return l*t;case"in":return 72*l*t;case"pc":return 12*l*t;case"mm":return l*k*t;case"cm":return l*x*t}}return parseFloat(e)}function z(e){const t=null==e?void 0:e.size;return{width:null!=t&&"object"==typeof t&&"width"in t?(0,i.F2)(t.width):null,height:null!=t&&"object"==typeof t&&"height"in t?(0,i.F2)(t.height):null}}function F(e,t){var l,g;const k="number"==typeof(null==t?void 0:t.size)?null==t?void 0:t.size:null,x=null!=k?(0,i.F2)(k):null,F=null!=(null==t?void 0:t.maxSize)?(0,i.F2)(t.maxSize):null,C=null!=(null==t?void 0:t.opacity)?t.opacity:null,S=null!=(null==t?void 0:t.rotation)?t.rotation:"angle"in e?e.angle:null,Z=(0,o._M)(e);let j=(0,o.mx)(e);if(Z&&!j){const e="type"in Z?null:new a.Z(Z);"#ffffff"===(e?e.toHex():null)&&(j={color:"#bdc3c7",width:.75})}const _={shape:null,fill:null,stroke:j,offset:[0,0]};null!=(l=j)&&l.width&&(j.width=Math.min(j.width,w));const P=(null==(g=j)?void 0:g.width)||0;let q=null!=(null==t?void 0:t.size)&&(null==(null==t?void 0:t.scale)||(null==t?void 0:t.scale)),E=0,D=0,H=!1;switch(e.type){case d:{const t=e.style,l=Math.min(null!=x?x:(0,i.F2)(e.size),F||y);switch(E=l,D=l,t){case"circle":_.shape={type:"circle",cx:0,cy:0,r:.5*l},q||(E+=P,D+=P);break;case"cross":_.shape={type:"path",path:[{command:"M",values:[0,.5*D]},{command:"L",values:[E,.5*D]},{command:"M",values:[.5*E,0]},{command:"L",values:[.5*E,D]}]};break;case"diamond":_.shape={type:"path",path:[{command:"M",values:[0,.5*D]},{command:"L",values:[.5*E,0]},{command:"L",values:[E,.5*D]},{command:"L",values:[.5*E,D]},{command:"Z",values:[]}]},q||(E+=P,D+=P);break;case"square":_.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[E,0]},{command:"L",values:[E,D]},{command:"L",values:[0,D]},{command:"Z",values:[]}]},q||(E+=P,D+=P),S&&(H=!0);break;case"triangle":_.shape={type:"path",path:[{command:"M",values:[.5*E,0]},{command:"L",values:[E,D]},{command:"L",values:[0,D]},{command:"Z",values:[]}]},q||(E+=P,D+=P),S&&(H=!0);break;case"x":_.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[E,D]},{command:"M",values:[E,0]},{command:"L",values:[0,D]}]},S&&(H=!0);break;case"path":_.shape={type:"path",path:e.path||""},q||(E+=P,D+=P),S&&(H=!0),q=!0}break}case h:{var O;const{width:e,height:l}=z(t),a=null!=l?l:Math.min(null!=x?x:P,F||w),n=null!=e?e:b;j.width=a,E=n,D=a;const i=(null==_||null==(O=_.stroke)?void 0:O.cap)||"butt",o="round"===i;q=!0,_.stroke.cap="butt"===i?"square":i,_.shape={type:"path",path:[{command:"M",values:[o?a/2:0,D/2]},{command:"L",values:[o?E-a/2:E,D/2]}]};break}case c:case r:{const e="object"==typeof(null==t?void 0:t.symbolConfig)&&(null==t?void 0:t.symbolConfig.isSquareFill),{width:l,height:a}=z(t);E=e&&null!=l?l:null!=x?x:v,D=e&&null!=a?a:E,q||(E+=P,D+=P),q=!0,_.shape=e?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[E,0]},{command:"L",values:[E,D]},{command:"L",values:[0,D]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:s.JZ.fill[0];break}case m:{let t=(0,i.F2)(e.width),l=(0,i.F2)(e.height);const a=null!=x?x:Math.max(t,l),n=t/l;t=n<=1?Math.ceil(a*n):a,l=n<=1?a:Math.ceil(a/n),E=Math.min(t,F||y),D=Math.min(l,F||y),_.shape={type:"image",x:-Math.round(E/2),y:-Math.round(D/2),width:E,height:D,src:e.url||""},S&&(H=!0);break}case p:{const t=e,l=t.text||f,a=t.font,n=Math.min(null!=x?x:(0,i.F2)(a.size),F||y),o=M(l,{weight:a.weight,size:n,family:a.family}),s=/[\uE600-\uE6FF]/.test(l);E=s?n:o,D=n;let u=.25*L((a?n:0).toString());s&&(u+=5),_.shape={type:"text",text:l,x:0,y:u,align:"middle",decoration:a&&a.decoration,rotated:t.rotated,kerning:t.kerning},_.font=a&&{size:n,style:a.style,decoration:a.decoration,weight:a.weight,family:a.family};break}}if(!_.shape)return Promise.reject(new n.Z("symbolPreview: renderPreviewHTML2D","symbol not supported."));const T=Z,V=e.color;let W=null;return T&&"pattern"===T.type&&V&&e.type!==c?W=(0,o.Od)(T.src,V.toCss(!0)).then((e=>(T.src=e,_.fill=T,_))):(_.fill=Z,W=Promise.resolve(_)),W.then((e=>{const l=[[e]];if("object"==typeof(null==t?void 0:t.symbolConfig)&&null!=t&&t.symbolConfig.applyColorModulation){const t=.6*E;l.unshift([{...e,offset:[-t,0],fill:(0,s.dc)(Z,-.3)}]),l.push([{...e,offset:[t,0],fill:(0,s.dc)(Z,.3)}]),E+=2*t,q=!1}return(0,u.w)(l,[E,D],{node:t&&t.node,scale:q,opacity:C,rotation:S,useRotationSize:H,effectView:null==t?void 0:t.effectView})}))}}}]);
//# sourceMappingURL=1442.ffccc085.js.map